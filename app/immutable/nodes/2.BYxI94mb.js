import{f as Q,a as W}from"../chunks/_hGZPh9S.js";import{i as X}from"../chunks/Ds9QznhR.js";import{c as me,o as te}from"../chunks/B3LRl9OC.js";import{a as se,a2 as pe,Y as z,h as T,R as _e,W as he,i as _,k as ge,ay as ye,a4 as be,ad as j,ap as B,e as q,a3 as Ee,au as we,b as V,s as xe,c as Te,ab as Ce,aB as D,_ as ee,as as ne,H as Ne,aF as Ae,r as le,p as Me,aG as Ie,aH as De,aI as K,d as ie,an as He,aJ as ke,ar as Re,aK as Se,q as Fe,I as Z,aL as S,n as k,F as L,aM as oe,N as I,O as A,Q as G,K as fe,M as $,u as ae}from"../chunks/6HKbVTHx.js";import{s as Y}from"../chunks/qG3tIbIQ.js";import{p as R}from"../chunks/D1FhMxVP.js";function Oe(r,a){return a}function Pe(r,a,e){for(var t=r.items,n=[],i=a.length,s=0;s<i;s++)ke(a[s].e,n,!0);var o=i>0&&n.length===0&&e!==null;if(o){var c=e.parentNode;Re(c),c.append(e),t.clear(),N(r,a[0].prev,a[i-1].next)}Se(n,()=>{for(var m=0;m<i;m++){var h=a[m];o||(t.delete(h.k),N(r,h.prev,h.next)),ie(h.e,!o)}})}function qe(r,a,e,t,n,i=null){var s=r,o={flags:a,items:new Map,first:null};{var c=r;s=T?z(_e(c)):c.appendChild(se())}T&&he();var m=null,h=!1,b=new Map,l=ge(()=>{var d=e();return Ne(d)?d:d==null?[]:ne(d)}),u,f;function v(){Le(f,u,o,b,s,n,a,t,e),i!==null&&(u.length===0?m?le(m):m=V(()=>i(s)):m!==null&&Me(m,()=>{m=null}))}pe(()=>{f??=Fe,u=_(l);var d=u.length;if(h&&d===0)return;h=d===0;let E=!1;if(T){var w=ye(s)===be;w!==(d===0)&&(s=j(),z(s),B(!1),E=!0)}if(T){for(var p=null,y,g=0;g<d;g++){if(q.nodeType===Ee&&q.data===we){s=q,E=!0,B(!1);break}var M=u[g],C=t(M,g);y=J(q,o,p,null,M,C,g,n,a,e),o.items.set(C,y),p=y}d>0&&z(j())}if(T)d===0&&i&&(m=V(()=>i(s)));else if(xe()){var H=new Set,x=Te;for(g=0;g<d;g+=1){M=u[g],C=t(M,g);var F=o.items.get(C)??b.get(C);F?ue(F,M,g):(y=J(null,o,null,null,M,C,g,n,a,e,!0),b.set(C,y)),H.add(C)}for(const[O,P]of o.items)H.has(O)||x.skipped_effects.add(P.e);x.oncommit(v)}else v();E&&B(!0),_(l)}),T&&(s=q)}function Le(r,a,e,t,n,i,s,o,c){var m=a.length,h=e.items,b=e.first,l=b,u,f=null,v=[],d=[],E,w,p,y;for(y=0;y<m;y+=1){if(E=a[y],w=o(E,y),p=h.get(w),p===void 0){var g=t.get(w);if(g!==void 0){t.delete(w),h.set(w,g);var M=f?f.next:l;N(e,f,g),N(e,g,M),U(g,M,n),f=g}else{var C=l?l.e.nodes_start:n;f=J(C,e,f,f===null?e.first:f.next,E,w,y,i,s,c)}h.set(w,f),v=[],d=[],l=f.next;continue}if(ue(p,E,y),(p.e.f&K)!==0&&le(p.e),p!==l){if(u!==void 0&&u.has(p)){if(v.length<d.length){var H=d[0],x;f=H.prev;var F=v[0],O=v[v.length-1];for(x=0;x<v.length;x+=1)U(v[x],H,n);for(x=0;x<d.length;x+=1)u.delete(d[x]);N(e,F.prev,O.next),N(e,f,F),N(e,O,H),l=H,f=O,y-=1,v=[],d=[]}else u.delete(p),U(p,l,n),N(e,p.prev,p.next),N(e,p,f===null?e.first:f.next),N(e,f,p),f=p;continue}for(v=[],d=[];l!==null&&l.k!==w;)(l.e.f&K)===0&&(u??=new Set).add(l),d.push(l),l=l.next;if(l===null)continue;p=l}v.push(p),f=p,l=p.next}if(l!==null||u!==void 0){for(var P=u===void 0?[]:ne(u);l!==null;)(l.e.f&K)===0&&P.push(l),l=l.next;var ve=P.length;if(ve>0){var ce=m===0?n:null;Pe(e,P,ce)}}r.first=e.first&&e.first.e,r.last=f&&f.e;for(var de of t.values())ie(de.e);t.clear()}function ue(r,a,e,t){Ce(r.v,a),r.i=e}function J(r,a,e,t,n,i,s,o,c,m,h){var b=(c&Ie)!==0,l=(c&De)===0,u=b?l?D(n,!1,!1):ee(n):n,f=(c&Ae)===0?s:ee(s),v={i:f,v:u,k:i,a:null,e:null,prev:e,next:t};try{if(r===null){var d=document.createDocumentFragment();d.append(r=se())}return v.e=V(()=>o(r,u,f,m),T),v.e.prev=e&&e.e,v.e.next=t&&t.e,e===null?h||(a.first=v):(e.next=v,e.e.next=v.e),t!==null&&(t.prev=v,t.e.prev=v.e),v}finally{}}function U(r,a,e){for(var t=r.next?r.next.e.nodes_start:e,n=a?a.e.nodes_start:e,i=r.e.nodes_start;i!==null&&i!==t;){var s=He(i);n.before(i),i=s}}function N(r,a,e){a===null?r.first=e:(a.next=e,a.e.next=e&&e.e),e!==null&&(e.prev=a,e.e.prev=a&&a.e)}function Ye(r,a,e){var t=r==null?"":""+r;return t=t?t+" "+a:a,t===""?null:t}function ze(r,a){return r==null?null:String(r)}function Be(r,a,e,t,n,i){var s=r.__className;if(T||s!==e||s===void 0){var o=Ye(e,t);(!T||o!==r.getAttribute("class"))&&(o==null?r.removeAttribute("class"):r.className=o),r.__className=e}return i}function re(r,a,e,t){var n=r.__style;if(T||n!==a){var i=ze(a);(!T||i!==r.getAttribute("style"))&&(i==null?r.removeAttribute("style"):r.style.cssText=i),r.__style=a}return t}var Ke=Q('<div class="card svelte-1u0xoi6"><p class="card-title"> </p> <div class="progress-bar svelte-1u0xoi6"><div class="progress svelte-1u0xoi6"><p class="progress-text svelte-1u0xoi6"> </p></div></div> <p class="progress-difference svelte-1u0xoi6"> </p></div>');function Ue(r,a){Z(a,!1);const e=D(),t=D(),n=D(),i=D();let s=R(a,"title",8,"Diamond 4"),o=R(a,"progress",8,90),c=R(a,"total",8,100);const m=me();S(()=>(L(o()),L(c())),()=>{k(e,Math.min(o()/c()*100,100))}),S(()=>(L(c()),L(o())),()=>{k(t,Math.max(c()-o(),0))}),S(()=>_(e),()=>{k(n,_(e)===100)}),S(()=>_(n),()=>{k(i,_(n)?"rgb(0, 123, 255)":"rgb(224, 88, 24)")}),S(()=>_(n),()=>{m("completeChange",{complete:_(n)})}),oe(),X();var h=Ke(),b=I(h),l=I(b,!0);A(b);var u=G(b,2),f=I(u),v=I(f),d=I(v);A(v),A(f),A(u);var E=G(u,2),w=I(E);A(E),A(h),fe(()=>{Y(l,s()),re(f,`width: ${_(e)??""}%; background-color: ${_(i)??""};`),Y(d,`${o()??""}/${c()??""}`),re(E,`color: ${(_(n)?_(i):"")??""};`),Y(w,`${_(t)??""} to Diamond`)}),W(r,h),$()}var Ve=Q('<div><p class="player-steamname svelte-1h7q4iz"> </p> <!></div>');function Ge(r,a){Z(a,!1);let e=R(a,"name",8,"turbo"),t=R(a,"steamname",8,"turbo#9840"),n=R(a,"rank",12,0),i=R(a,"league",12,"Diamond 4"),s=D(!1);te(async()=>{try{const l=encodeURIComponent(e()),u=await fetch(`https://api.the-finals-leaderboard.com/v1/leaderboard/s8/crossplay?name=${l}`);if(!u.ok)throw new Error(`HTTP ${u.status}`);const f=await u.json();n(f.data[0].rankScore),i(f.data[0].league)}catch(l){console.error("Failed to fetch rank:",l)}});function o(l){k(s,l.detail.complete)}X();var c=Ve(),m=I(c),h=I(m,!0);A(m);var b=G(m,2);Ue(b,{get title(){return i()},get progress(){return n()},total:4e4,$$events:{completeChange:o}}),A(c),fe(()=>{Be(c,1,`player ${_(s)?"complete":""}`,"svelte-1h7q4iz"),Y(h,t())}),W(r,c),$()}var Je=Q('<main class="svelte-1uha8ag"><div class="players svelte-1uha8ag"></div></main>');function ea(r,a){Z(a,!1);const e=D();let t=D([]);te(async()=>{try{const s=await fetch("https://api.the-finals-leaderboard.com/v1/leaderboard/s8worldtour/crossplay?clubTag=HSD");if(!s.ok)throw new Error(`HTTP ${s.status}`);const o=await s.json();k(t,o.data.map(c=>({name:c.name,steamname:c.steamName})))}catch(s){console.error("Failed to fetch rank:",s)}}),S(()=>_(t),()=>{k(e,[..._(t)].sort((s,o)=>s.steamname.localeCompare(o.steamname)))}),oe(),X();var n=Je(),i=I(n);qe(i,5,()=>_(e),Oe,(s,o)=>{Ge(s,{get name(){return _(o),ae(()=>_(o).name)},get steamname(){return _(o),ae(()=>_(o).steamname)}})}),A(i),A(n),W(r,n),$()}export{ea as component};
