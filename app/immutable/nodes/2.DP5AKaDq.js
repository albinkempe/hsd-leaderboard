import{f as J,a as U}from"../chunks/BQTtt9lx.js";import{i as ne}from"../chunks/S_62MmHS.js";import{o as ce}from"../chunks/BsQpzxXC.js";import{a as ue,D as _e,I as W,h as F,Z as ge,C as xe,l as t,M as ye,F as Me,H as be,G as fe,J as j,e as L,a7 as Te,au as Ee,b as te,s as we,c as Ce,ae as Ie,aA as M,a3 as ve,as as de,aE as Ae,aF as De,r as me,p as He,aG as Ne,aH as ke,aI as $,d as he,ao as Se,aJ as Re,ar as Pe,aK as ze,R as Fe,v as le,aL as C,O as E,n as A,aM as oe,z as R,A as N,B as Y,x as V,y as ie,i as re}from"../chunks/XMqoyUZz.js";import{s as q}from"../chunks/wQ1-299l.js";import{p as k,i as Oe}from"../chunks/u5C-EaJ2.js";function Be(r,a){return a}function Ge(r,a,e){for(var l=r.items,f=[],o=a.length,n=0;n<o;n++)Re(a[n].e,f,!0);var v=o>0&&f.length===0&&e!==null;if(v){var p=e.parentNode;Pe(p),p.append(e),l.clear(),S(r,a[0].prev,a[o-1].next)}ze(f,()=>{for(var d=0;d<o;d++){var _=a[d];v||(l.delete(_.k),S(r,_.prev,_.next)),he(_.e,!v)}})}function Le(r,a,e,l,f,o=null){var n=r,v={flags:a,items:new Map,first:null};{var p=r;n=F?W(ge(p)):p.appendChild(ue())}F&&xe();var d=null,_=!1,b=new Map,i=ye(()=>{var u=e();return Ae(u)?u:u==null?[]:de(u)}),m,s;function c(){qe(s,m,v,b,n,f,a,l,e),o!==null&&(m.length===0?d?me(d):d=te(()=>o(n)):d!==null&&He(d,()=>{d=null}))}_e(()=>{s??=Fe,m=t(i);var u=m.length;if(_&&u===0)return;_=u===0;let D=!1;if(F){var I=Me(n)===be;I!==(u===0)&&(n=fe(),W(n),j(!1),D=!0)}if(F){for(var h=null,x,g=0;g<u;g++){if(L.nodeType===Te&&L.data===Ee){n=L,D=!0,j(!1);break}var w=m[g],T=l(w,g);x=se(L,v,h,null,w,T,g,f,a,e),v.items.set(T,x),h=x}u>0&&W(fe())}if(F)u===0&&o&&(d=te(()=>o(n)));else if(we()){var P=new Set,y=Ce;for(g=0;g<u;g+=1){w=m[g],T=l(w,g);var z=v.items.get(T)??b.get(T);z?pe(z,w,g):(x=se(null,v,null,null,w,T,g,f,a,e,!0),b.set(T,x)),P.add(T)}for(const[O,G]of v.items)P.has(O)||y.skipped_effects.add(G.e);y.oncommit(c)}else c();D&&j(!0),t(i)}),F&&(n=L)}function qe(r,a,e,l,f,o,n,v,p){var d=a.length,_=e.items,b=e.first,i=b,m,s=null,c=[],u=[],D,I,h,x;for(x=0;x<d;x+=1){if(D=a[x],I=v(D,x),h=_.get(I),h===void 0){var g=l.get(I);if(g!==void 0){l.delete(I),_.set(I,g);var w=s?s.next:i;S(e,s,g),S(e,g,w),ee(g,w,f),s=g}else{var T=i?i.e.nodes_start:f;s=se(T,e,s,s===null?e.first:s.next,D,I,x,o,n,p)}_.set(I,s),c=[],u=[],i=s.next;continue}if(pe(h,D,x),(h.e.f&$)!==0&&me(h.e),h!==i){if(m!==void 0&&m.has(h)){if(c.length<u.length){var P=u[0],y;s=P.prev;var z=c[0],O=c[c.length-1];for(y=0;y<c.length;y+=1)ee(c[y],P,f);for(y=0;y<u.length;y+=1)m.delete(u[y]);S(e,z.prev,O.next),S(e,s,z),S(e,O,P),i=P,s=O,x-=1,c=[],u=[]}else m.delete(h),ee(h,i,f),S(e,h.prev,h.next),S(e,h,s===null?e.first:s.next),S(e,s,h),s=h;continue}for(c=[],u=[];i!==null&&i.k!==I;)(i.e.f&$)===0&&(m??=new Set).add(i),u.push(i),i=i.next;if(i===null)continue;h=i}c.push(h),s=h,i=h.next}if(i!==null||m!==void 0){for(var G=m===void 0?[]:de(m);i!==null;)(i.e.f&$)===0&&G.push(i),i=i.next;var K=G.length;if(K>0){var X=d===0?f:null;Ge(e,G,X)}}r.first=e.first&&e.first.e,r.last=s&&s.e;for(var Z of l.values())he(Z.e);l.clear()}function pe(r,a,e,l){Ie(r.v,a),r.i=e}function se(r,a,e,l,f,o,n,v,p,d,_){var b=(p&Ne)!==0,i=(p&ke)===0,m=b?i?M(f,!1,!1):ve(f):f,s=(p&De)===0?n:ve(n),c={i:s,v:m,k:o,a:null,e:null,prev:e,next:l};try{if(r===null){var u=document.createDocumentFragment();u.append(r=ue())}return c.e=te(()=>v(r,m,s,d),F),c.e.prev=e&&e.e,c.e.next=l&&l.e,e===null?_||(a.first=c):(e.next=c,e.e.next=c.e),l!==null&&(l.prev=c,l.e.prev=c.e),c}finally{}}function ee(r,a,e){for(var l=r.next?r.next.e.nodes_start:e,f=a?a.e.nodes_start:e,o=r.e.nodes_start;o!==null&&o!==l;){var n=Se(o);f.before(o),o=n}}function S(r,a,e){a===null?r.first=e:(a.next=e,a.e.next=e&&e.e),e!==null&&(e.prev=a,e.e.prev=a&&a.e)}function Ue(r,a){return r==null?null:String(r)}function ae(r,a,e,l){var f=r.__style;if(F||f!==a){var o=Ue(a);(!F||o!==r.getAttribute("style"))&&(o==null?r.removeAttribute("style"):r.style.cssText=o),r.__style=a}return l}var Je=J('<p class="progress-difference svelte-1u0xoi6"> </p>'),Ve=J('<p class="progress-difference svelte-1u0xoi6"> </p>'),Ye=J('<div class="card svelte-1u0xoi6"><p class="card-title svelte-1u0xoi6"> </p> <div class="progress-bar svelte-1u0xoi6"><div class="progress svelte-1u0xoi6"><p class="progress-text svelte-1u0xoi6"> </p></div></div> <!></div>');function Ke(r,a){le(a,!1);const e=M(),l=M(),f=M(),o=M(),n=M(),v=M(),p=M(),d=M(),_=M(),b=M(),i=M();let m=k(a,"title",8,""),s=k(a,"progress",8,90),c=k(a,"total",8,100),u=k(a,"step",8,2500),D=k(a,"maxTotal",8,47500);const I=["Bronze","Silver","Gold","Platinum","Diamond"],h=[4,3,2,1],x=[];for(const B of I)for(const H of h)x.push(`${B} ${H}`);const g={Bronze:"rgb(111,63,26)",Silver:"rgb(108,108,108)",Gold:"rgb(176,122,0)",Platinum:"rgb(14,122,133)",Diamond:"rgb(10,79,138)"};C(()=>(A(D()),A(u())),()=>{E(e,Math.floor(D()/u()))}),C(()=>(A(s()),A(u()),t(e)),()=>{E(l,Math.min(Math.floor(s()/u()),t(e)))}),C(()=>(t(l),t(e)),()=>{E(f,Math.min(t(l)+1,t(e)))}),C(()=>t(f),()=>{E(o,x[t(f)]??x[x.length-1])}),C(()=>(t(f),A(u()),A(s())),()=>{E(n,Math.max(t(f)*u()-s(),0))}),C(()=>(A(s()),A(c())),()=>{E(v,Math.min(s()/Math.max(c(),1)*100,100))}),C(()=>t(v),()=>{E(p,t(v)===100)}),C(()=>A(m()),()=>{E(d,(m()||"").split(" ")[0]||"")}),C(()=>t(d),()=>{E(_,t(d)?t(d).charAt(0).toUpperCase()+t(d).slice(1).toLowerCase():"")}),C(()=>t(_),()=>{E(b,g[t(_)]??"rgb(100, 100, 100)")}),C(()=>(t(p),t(b)),()=>{E(i,t(p)?"rgb(0, 123, 255)":t(b))}),oe(),ne();var w=Ye(),T=R(w),P=R(T,!0);N(T);var y=Y(T,2),z=R(y),O=R(z),G=R(O);N(O),N(z),N(y);var K=Y(y,2);{var X=B=>{var H=Je(),Q=R(H);N(H),V(()=>{ae(H,`color: ${t(i)??""};`),q(Q,`Max rank (${t(e),re(()=>x[t(e)])??""})`)}),U(B,H)},Z=B=>{var H=Ve(),Q=R(H);N(H),V(()=>{ae(H,`color: ${t(b)??""};`),q(Q,`${t(n)??""} to ${t(o)??""}`)}),U(B,H)};Oe(K,B=>{t(l)===t(e)?B(X):B(Z,!1)})}N(w),V(()=>{q(P,m()),ae(z,`width: ${t(v)??""}%; background-color: ${t(i)??""};`),q(G,`${s()??""}/${c()??""}`)}),U(r,w),ie()}var Xe=J('<div class="player svelte-1h7q4iz"><p class="player-steamname svelte-1h7q4iz"> </p> <!></div>');function Ze(r,a){le(a,!1);const e=M();let l=k(a,"name",8,""),f=k(a,"steamname",8,""),o=k(a,"progress",12,0),n=k(a,"league",12,""),v=k(a,"step",8,2500),p=k(a,"maxTotal",8,47500);ce(async()=>{try{const m=encodeURIComponent(l()),s=await fetch(`https://api.the-finals-leaderboard.com/v1/leaderboard/s8/crossplay?name=${m}`);if(!s.ok)throw new Error(`HTTP ${s.status}`);const c=await s.json();o(c.data[0].rankScore),n(c.data[0].league)}catch(m){console.error("Failed to fetch rank:",m)}}),C(()=>(A(o()),A(v()),A(p())),()=>{E(e,Math.min(Math.max(Math.ceil(o()/v())*v(),v()),p()))}),oe(),ne();var d=Xe(),_=R(d),b=R(_,!0);N(_);var i=Y(_,2);Ke(i,{get title(){return n()},get progress(){return o()},get total(){return t(e)}}),N(d),V(()=>q(b,f())),U(r,d),ie()}var Qe=J('<main class="svelte-1uha8ag"><h1 class="svelte-1uha8ag">HSD Esports</h1> <h2 class="svelte-1uha8ag">Players</h2> <div class="players svelte-1uha8ag"></div></main>');function ra(r,a){le(a,!1);const e=M();let l=M([]);ce(async()=>{try{const n=await fetch("https://api.the-finals-leaderboard.com/v1/leaderboard/s8worldtour/crossplay?clubTag=HSD");if(!n.ok)throw new Error(`HTTP ${n.status}`);const v=await n.json();E(l,v.data.map(p=>({name:p.name,steamname:p.steamName})))}catch(n){console.error("Failed to fetch rank:",n)}}),C(()=>t(l),()=>{E(e,[...t(l)].sort((n,v)=>n.steamname.localeCompare(v.steamname)))}),oe(),ne();var f=Qe(),o=Y(R(f),4);Le(o,5,()=>t(e),Be,(n,v)=>{Ze(n,{get name(){return t(v),re(()=>t(v).name)},get steamname(){return t(v),re(()=>t(v).steamname)}})}),N(o),N(f),U(r,f),ie()}export{ra as component};
